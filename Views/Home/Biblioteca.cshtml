@model ListaLivrosViewModel

@{
    ViewData["Title"] = "Biblioteca";
    Layout = "_LayoutBase";
}
<style>
    .sidebar-info ul li a {
        display: block;
        padding: 8px 12px;
        color: #333;
        text-decoration: none;
        transition: all 0.3s ease;
        border-radius: 4px;
    }

    .sidebar-info ul li a:hover {
        background-color: #002147;
        color: var(--white);
    }

</style>
    <!-- Header 
    ============================================= -->
    <header>
        <!-- Start Navigation -->
        <nav class="navbar mobile-sidenav inc-shape navbar-sticky navbar-default validnavs dark">

            <div class="container d-flex justify-content-between align-items-center">


                <div class="navbar-brand-left">
                    <!-- Start Header Navigation -->
                    <div class="navbar-header">
                        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar-menu">
                            <i class="fa fa-bars"></i>
                        </button>
                        <a class="navbar-brand" asp-area="" asp-controller="Home" asp-action="Index" >
                        <img src="~/assets/img/Logotipo-Principal.png" class="logo" alt="Logo">
                        </a>
                    </div>
                    <!-- End Header Navigation -->
                </div>

                <!-- Collect the nav links, forms, and other content for toggling -->
                <div class="collapse navbar-collapse" id="navbar-menu">

                    <img src="~/assets/img/logo.png" alt="Logo" style="width: 70%;">
                    <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar-menu">
                        <i class="fa fa-times"></i>
                    </button>

                    <ul class="nav navbar-nav navbar-right" data-in="fadeInDown" data-out="fadeOutUp">
                        <li>
                            <a asp-area="" asp-controller="Home" asp-action="Index" class="active">Home</a>
                        </li>
                        <li>
                            <a asp-area="" asp-controller="Home" asp-action="Cursos">Cursos</a>
                        </li>
                        <li class="dropdown megamenu-fw">
                            <a href="#" class="dropdown-toggle" data-toggle="dropdown">Professores</a>
                            <ul class="dropdown-menu megamenu-content" role="menu">
                                <li>
                                    <div class="row">
                                        <div class="col-menu col-md-3">
                                            <h6 class="title">Inglês</h6>
                                            <div class="content">
                                                <ul class="menu-col">
                                                    <li><a asp-area="" asp-controller="Home" asp-action="Prof06">Faustino Chingueve</a></li>
                                                    <li><a asp-area="" asp-controller="Home" asp-action="Prof07">Paulo Bingue</a></li>
                                                    <li><a asp-area="" asp-controller="Home" asp-action="Prof02">Justino Essuvo</a></li>
                                                    <li><a asp-area="" asp-controller="Home" asp-action="Prof01">Sebasitão de Oliveira</a></li>
                                                </ul>
                                            </div>
                                        </div>
                                         <!-- end col-3 -->
                                        <div class="col-menu col-md-2">
                                            <h6 class="title">Francês</h6>
                                            <div class="content">
                                                <ul class="menu-col">
                                                    <li><a asp-area="" asp-controller="Home" asp-action="Prof05">Armando Baptista</a></li>
                                                    <li><a asp-area="" asp-controller="Home" asp-action="Prof11">Mujinja Pombo</a></li>
                                                </ul>
                                            </div>
                                        </div>
                                        <!-- end col-3 -->
                                        <div class="col-menu col-md-2">
                                            <h6 class="title">Umbundu</h6>
                                            <div class="content">
                                                <ul class="menu-col"> 
                                                    <li><a asp-area="" asp-controller="Home" asp-action="Prof10">Patrício Kavela</a></li>
                                                </ul>
                                            </div>
                                        </div>
                                        <!-- end col-3 -->
                                        <div class="col-menu col-md-2">
                                            <h6 class="title">Coreano</h6>
                                            <div class="content">
                                                <ul class="menu-col">
                                                    <li><a asp-area="" asp-controller="Home" asp-action="Prof09">Joiza Victor</a></li>
                                                </ul>
                                            </div>
                                        </div>
                                        <!-- end col-3 -->
                                        <div class="col-menu col-md-2">
                                            <h6 class="title">Espanhol</h6>
                                            <div class="content">
                                                <ul class="menu-col">
                                                    <li><a asp-area="" asp-controller="Home" asp-action="Prof03">Surenka Quiosa</a></li>
                                                    <li><a asp-area="" asp-controller="Home" asp-action="Prof04">Ricardo Gonçalves</a></li>
                                                </ul>
                                            </div>
                                        </div>
                                        <!-- end col-3 -->
                                    </div>
                                    <!-- end row -->
                                </li>
                            </ul>
                        </li>
                        <li>
                            <a asp-area="" asp-controller="Home" asp-action="Comissao" class="">Comissão Executiva</a>
                        </li>
                        <li>
                            <a asp-area="" asp-controller="Home" asp-action="Biblioteca" class="">Biblioteca</a>
                        </li>
                
                       
                        <li>
                            <a asp-area="" asp-controller="Home" asp-action="Contactos">Contacto</a>
                        </li>
                        <li class="dropdown">
                            <a class="btn text-end dropdown-toggle entrar-btn" data-toggle="dropdown" href="#">
                                <i class="fas fa-user"></i> Entrar
                            </a>
                            <ul class="dropdown-menu">
                                <li><a asp-area="" asp-controller="Home" asp-action="Login">Login</a></li>
                                <li><a asp-area="" asp-controller="Home" asp-action="Cadastrar">Cadastrar-se</a></li>
                            </ul>
                        </li>
                    </ul>
                </div>
                <!-- /.navbar-collapse -->

                <!-- Main Nav -->
            </div>
            <!-- Overlay screen for menu -->
            <div class="overlay-screen"></div>
            <!-- End Overlay screen for menu -->

        </nav>
        <!-- End Navigation -->
    </header>
    <!-- End Header -->

    <!-- Start Breadcrumb 
    ============================================= -->
    <div class="breadcrumb-area shadow dark text-center bg-fixed text-light" style="background-image: url(../assets/img/banner/12.png);">
        <div class="container">
            <div class="row">
                <div class="col-lg-12">
                    <h1>Bem-Vindo a nossa Biblioteca</h1>
                    <ul class="breadcrumb">
                        <li><a href="#"><i class="fas fa-home"></i> Home</a></li>
                        <li><a href="#">Página</a></li>
                        <li class="active">Biblioteca</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
    <!-- End Breadcrumb -->

    <!-- Start Biblioteca 
    ============================================= -->
    <div class="blog-area full-blog left-sidebar full-blog default-padding">
        <div class="container">
            <div class="row">
                <div class="blog-items">
                    <div class="blog-content col-lg-8">
                        <div class="popular-courses-items bottom-price">
                            <div class="row">
                                <!-- Loop através dos livros -->
                                @foreach (var livro in Model.Livros)
                                {
                                    @if (livro.Status == "ATIVO"){
                                        <div class="col-md-6 equal-height" style="padding-top: 50px;">
                                            <div class="item">
                                                <div class="thumb" style="height: 250px;">
                                                    <a asp-action="DetalhesLivro" asp-route-id="@livro.IdLivro">
                                                        @if (!string.IsNullOrEmpty(livro.ImagemCaminho))
                                                        {
                                                            <img src="http://localhost:5043/@livro.ImagemCaminho" alt="Capa do Livro">
                                                        }
                                                        else
                                                        {
                                                            <img src="~/assets/img/livros/IMG_3024.jpg" alt="Capa do Livro">
                                                        }
                                                    </a>
                                                </div>
                                                <div class="info">
                                                    <table class="table">
                                                        <tr>
                                                            <th>Título:</th>
                                                            <td><a asp-action="DetalhesLivro" asp-route-id="@livro.IdLivro">@livro.Titulo</a></td>
                                                        </tr>
                                                        <tr>
                                                            <th>Autor:</th>
                                                            <td>@livro.Autor</td>
                                                        </tr>
                                                        <tr>
                                                            <th>Preço:</th>
                                                             @if (livro.Categoria == "Gratuito")
                                                            {
                                                                <td><span class="badge bg-success">Gratuito</span></td>
                                                            }
                                                            else
                                                            {
                                                                <td>@livro.Preco.ToString("N0") Kz</td>
                                                            }
                                                        </tr>
                                                        <tr>
                                                            <th>Disponível:</th>
                                                            <td>@livro.Formato</td>
                                                        </tr>
                                                        <tr>
                                                            <th>Categoria:</th>
                                                            <td>@livro.Categoria</td>
                                                        </tr>
                                                    </table>
                                                    <div>
                                                        <a asp-action="DetalhesLivro" asp-route-id="@livro.IdLivro" class="btn btn-dark effect btn-sm">
                                                            <i class="fas fa-info-circle"></i> Ver Mais
                                                        </a>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    }
                                }
                                <!-- End Single Book Item -->
                            </div>
                        </div>

                        <!-- Pagination -->
                        @if (Model.TotalPaginas > 1)
                        {
                            <div class="row">
                                <div class="col-lg-12 pagi-area">
                                    <nav aria-label="navigation">
                                        <ul class="pagination">
                                            <li class="@(Model.PaginaAtual == 1 ? "disabled" : "")">
                                                <a asp-action="Biblioteca" 
                                                asp-route-searchTerm="@Model.SearchTerm"
                                                asp-route-categoria="@Model.CategoriaSelecionada"
                                                asp-route-formato="@Model.FormatoSelecionado"
                                                asp-route-page="@(Model.PaginaAtual - 1)">Anterior</a>
                                            </li>
                                            
                                            @for (int i = 1; i <= Model.TotalPaginas; i++)
                                            {
                                                <li class="@(i == Model.PaginaAtual ? "active" : "")">
                                                    <a asp-action="Biblioteca" 
                                                    asp-route-searchTerm="@Model.SearchTerm"
                                                    asp-route-categoria="@Model.CategoriaSelecionada"
                                                    asp-route-formato="@Model.FormatoSelecionado"
                                                    asp-route-page="@i">@i</a>
                                                </li>
                                            }
                                            
                                            <li class="@(Model.PaginaAtual == Model.TotalPaginas ? "disabled" : "")">
                                                <a asp-action="Biblioteca" 
                                                asp-route-searchTerm="@Model.SearchTerm"
                                                asp-route-categoria="@Model.CategoriaSelecionada"
                                                asp-route-formato="@Model.FormatoSelecionado"
                                                asp-route-page="@(Model.PaginaAtual + 1)">Seguinte</a>
                                            </li>
                                        </ul>
                                    </nav>
                                </div>
                            </div>
                        }
                    </div>
                    <!-- Start Sidebar -->
                    <div class="sidebar col-lg-4">
                        <aside>
                            <!-- Start Sidebar Item -->
                            <div class="sidebar-item search">
                                <div class="title">
                                    <h4>Pesquisar</h4>
                                </div>
                                <div class="sidebar-info">
                                    <form method="get" asp-action="Biblioteca">
                                        <input type="text" name="searchTerm" class="form-control" value="@Model.SearchTerm">
                                        <input type="hidden" name="categoria" value="@Model.CategoriaSelecionada">
                                        <input type="hidden" name="formato" value="@Model.FormatoSelecionado">
                                        <input type="submit" value="Pesquisar">
                                    </form>
                                </div>
                            </div>
                            <!-- End Sidebar Item -->

                            <!-- Start Sidebar Item -->
                            <div class="sidebar-item tags">
                                <div class="title">
                                    <h4>Categorias</h4>
                                </div>
                                <div class="sidebar-info">
                                    <ul>
                                        <li><a asp-action="Biblioteca" 
                                            asp-route-searchTerm="@Model.SearchTerm"
                                            asp-route-formato="@Model.FormatoSelecionado"
                                            asp-route-categoria="">Todas</a></li>
                                        @foreach (var cat in Model.Categorias)
                                        {
                                            <li>
                                                <a asp-action="Biblioteca" 
                                                asp-route-searchTerm="@Model.SearchTerm"
                                                asp-route-formato="@Model.FormatoSelecionado"
                                                asp-route-categoria="@cat"
                                                class="@(cat == Model.CategoriaSelecionada ? "active" : "")">@cat</a>
                                            </li>
                                        }
                                    </ul>
                                </div>
                            </div>
                            <!-- End Sidebar Item -->

                            <!-- Start Sidebar Item -->
                            <div class="sidebar-item tags">
                                <div class="title">
                                    <h4>Formato</h4>
                                </div>
                                <div class="sidebar-info">
                                    <ul>
                                        <li><a asp-action="Biblioteca" 
                                            asp-route-searchTerm="@Model.SearchTerm"
                                            asp-route-categoria="@Model.CategoriaSelecionada"
                                            asp-route-formato="">Todos</a></li>
                                        @foreach (var formato in Model.Formatos)
                                        {
                                            <li>
                                                <a asp-action="Biblioteca" 
                                                asp-route-searchTerm="@Model.SearchTerm"
                                                asp-route-categoria="@Model.CategoriaSelecionada"
                                                asp-route-formato="@formato"
                                                class="@(formato == Model.FormatoSelecionado ? "active" : "")">@formato</a>
                                            </li>
                                        }
                                    </ul>
                                </div>
                            </div>
                            <!-- End Sidebar Item -->
                        </aside>
                    </div>
                    <!-- End Start Sidebar -->
                </div>
            </div>
        </div>
    </div>
    <!-- End Biblioteca -->
